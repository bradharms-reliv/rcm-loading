/*! rcm-loading 2016-12-13 */

var RcmLoadingJqueryGlobalLoader=function(window,jQuery,rcmLoading){var loaderElm,self=this,globalLoaderName="rcm-global-loader",waitBeforeShow=rcmLoading.getConfigValue("waitBeforeShow"),waitBeforeHide=rcmLoading.getConfigValue("waitBeforeHide"),url={template:rcmLoading.getTemplateUrl("loading.html"),css:rcmLoading.getTemplateUrl("loading.css")},getLoaderElm=function(){return loaderElm&&loaderElm.length>0?loaderElm:(loaderElm=jQuery(document).find(globalLoaderName),loaderElm.length>0?loaderElm:loaderElm=jQuery(document).find("["+globalLoaderName+"]"))},hasLoaderElement=function(){var loaderElm=getLoaderElm();return loaderElm&&loaderElm.length>0},show=function(){console.log("----show"),loaderElm.find(".loading-message").html(rcmLoading.getConfigValue("loadingMessage")),loaderElm.show()},showTimeout=null,hide=function(){console.log("----hide"),loaderElm.find(".loading-message").html(rcmLoading.getConfigValue("loadingCompleteMessage")),loaderElm.hide()},hideTimeout=null,onLoadingStart=function(loadingParams){showTimeout||(showTimeout=window.setTimeout(show,waitBeforeShow))},onLoadingChange=function(loadingParams){var percentMsg="",percent=loadingParams.tracker.getPercent();percent>0&&rcmLoading.getConfigValue("showPercent")&&(percentMsg=" "+loadingParams.tracker.getPercent()+"%"),loaderElm.find(".loading-message").html(rcmLoading.getConfigValue("loadingMessage")+percentMsg)},onLoadingComplete=function(loadingParams){showTimeout&&(window.clearTimeout(showTimeout),showTimeout=null),hideTimeout&&(window.clearTimeout(hideTimeout),hideTimeout=null),hideTimeout=window.setTimeout(hide,waitBeforeHide)},buildTemplate=function(){loaderElm.removeAttr("ng-show"),loaderElm.find(".loading-message").html("");var cssElm=loaderElm.find("[type='text/css']");cssElm.attr("href",url.css),cssElm.removeAttr("ng-href"),loaderElm.hide(),jQuery(document.body).append(loaderElm),buildEvents()},buildEvents=function(){rcmLoading.onLoadingStart(onLoadingStart,"rcmGlobalLoader"),rcmLoading.onLoadingChange(onLoadingChange,"rcmGlobalLoader"),rcmLoading.onLoadingComplete(onLoadingComplete,"rcmGlobalLoader")},getTemplate=function(){jQuery.get(url.template,function(data){loaderElm=jQuery(data),loaderElm.hide(),buildTemplate()})};self.init=function(){return hasLoaderElement()?void console.warn("RcmLoading jQuery-loader detected a loader element ("+globalLoaderName+"). Did NOT build jQuery loader."):void getTemplate()}};jQuery(document).ready(function(jQuery){var loader=new RcmLoadingJqueryGlobalLoader(window,jQuery,rcmLoading);loader.init()});
//# sourceMappingURL=jquery-loader.min.js.map