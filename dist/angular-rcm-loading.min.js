/*! rcm-loading 2016-12-15 */

angular.module("RcmLoading",[]),angular.module("RcmLoading").factory("rcmLoading",function(){return rcmLoading}),angular.module("RcmLoading").factory("rcmLoadingLoader",function(){return rcmLoadingLoader}),angular.module("RcmLoading").directive("rcmGlobalLoader",["$window","rcmLoading",function($window,rcmLoading){var url={template:rcmLoading.getTemplateUrl("loading.html"),css:rcmLoading.getTemplateUrl("loading.css")},waitBeforeShow=rcmLoading.getConfigValue("waitBeforeShow"),waitBeforeHide=rcmLoading.getConfigValue("waitBeforeHide"),compile=function(tElm,tAttr){return function(scope,element,attrs){scope.safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?this.$eval(fn):this.$apply(fn)},scope.cssUrl=url.css,scope.isLoading=!1,scope.showContent=!1;var showCount=0,preShow=function(){scope.isLoading=!0,scope.safeApply()},show=function(loadingParams){scope.loadingPercent="",scope.loadingMessage=rcmLoading.getConfigValue("loadingMessage"),scope.showContent=!0,scope.safeApply()},showTimeout=null,hide=function(loadingParams){scope.loadingPercent="",scope.loadingMessage=rcmLoading.getConfigValue("loadingCompleteMessage"),scope.isLoading=!1,scope.showContent=!1,scope.safeApply()},hideTimeout=null,onLoadingStart=function(loadingParams){showCount++,preShow(),hideTimeout&&(window.clearTimeout(hideTimeout),hideTimeout=null),showTimeout||(showTimeout=$window.setTimeout(show,waitBeforeShow))},onLoadingChange=function(loadingParams){scope.loadingPercent="";var percent=loadingParams.tracker.getPercent();percent>0&&rcmLoading.getConfigValue("showPercent")&&(scope.loadingPercent=" "+loadingParams.tracker.getPercent()+"%"),scope.loadingMessage=rcmLoading.getConfigValue("loadingMessage"),scope.safeApply()},onLoadingComplete=function(loadingParams){showCount--,showCount>0||(showCount=0,showTimeout&&($window.clearTimeout(showTimeout),showTimeout=null),hideTimeout&&($window.clearTimeout(hideTimeout),hideTimeout=null),hideTimeout=$window.setTimeout(hide,waitBeforeHide))};rcmLoading.onLoadingStart(onLoadingStart,"rcmGlobalLoader"),rcmLoading.onLoadingChange(onLoadingChange,"rcmGlobalLoader"),rcmLoading.onLoadingComplete(onLoadingComplete,"rcmGlobalLoader")}};return{compile:compile,scope:[],templateUrl:url.template}}]);
//# sourceMappingURL=angular-rcm-loading.min.js.map